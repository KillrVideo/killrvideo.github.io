<!doctype html>
<html>
<head>
  <title>KillrVideo - High Level Architecture Overview</title>
  <link href="/assets/css/bundle.css" rel="stylesheet">
  <link rel="icon" type="image/png" href="/assets/images/killrvideo-icon.png"/>
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
  
  <header>
    <nav class="nav">
      <div class="container">
        <div class="nav-left">
          <a href="/" class="nav-item">
            <img src="/assets/images/killrvideo.png" alt="KillrVideo logo" />
          </a>
        </div>

        <!-- Nav Toggle on mobile -->
        <span class="nav-toggle">
          <span></span>
          <span></span>
          <span></span>
        </span>

        <div class="nav-right nav-menu">
          <span class="nav-item">
            <a href="/getting-started/" class="button is-primary">
              <i class="fa fa-code fa-fw"></i> Get Started
            </a>
          </span>
          <a href="/docs/" class="nav-item">
            Docs
          </a>
          <a href="/support/" class="nav-item">
            Support
          </a>
          <a href="https://github.com/KillrVideo" target="_blank" class="nav-item">
            <i class="fa fa-github fa-2x"></i>
          </a>
        </div>
      </div>
    </nav>
  </header>

  
  
<section class="section">
  <div class="container">
    <div class="columns">
      <article class="column is-8-tablet is-9-widescreen content">
        <h1 id="high-level-architecture-overview">High Level Architecture Overview</h1>
<p>KillrVideo is a video sharing web application. As such, it&#39;s got a tiered setup that&#39;s
pretty common for web applications:</p>
<ul>
<li><strong>Web :</strong> The web UI that runs in a browser and is interacted with by the user and
send requests to the backend</li>
<li><strong>Microservices Tier:</strong> A tier of independent services that house the data and the logic for the features and 
functionality of the site.</li>
<li><strong>Data Tier :</strong> DataStax Enteprise server will persist all informations required by the application.</li>
</ul>
<p>We&#39;ll get into the details of how these tiers are actually implemented in the <a href="/docs/guides/web-tier/">next section</a>, but first 
let&#39;s take a look to an overall architecture diagram. Each compoment is deployed as Docker container.</p>
<p><img src="/assets/images/KillrVideoArchitecture.png" alt="KillrVideo Architecture"></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Technology</th>
<th>Execution</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://github.com/KillrVideo/killrvideo-web" target="_blank">WEB</a></td>
<td>Node.js</td>
<td>Docker</td>
<td>The web UI of the application.</td>
</tr>
<tr>
<td><a href="https://www.datastax.com/products/datastax-studio-and-development-tools" target="_blank">STUDIO</a></td>
<td>---</td>
<td>Docker</td>
<td>The notebook-oriented developer tool provided by Datastax for developers</td>
</tr>
<tr>
<td><a href="Microservices-Tier">SERVICES</a></td>
<td><a href="/docs/languages/nodejs/">Node.js</a>, <a href="/docs/languages/java/">Java</a>, <a href="/docs/languages/python/">Python</a>, <a href="/docs/languages/c-sharp/">C#</a></td>
<td>IDEs for dev and Docker for production</td>
<td>Business logic of the application, provides services for the UI and sample code to use DSE (Cassandra, Search, Graph) in multiple use cases. Services are exposed via gRPC</td>
</tr>
<tr>
<td><a href="/docs/development/generating-sample-data/">GENERATOR</a></td>
<td>Node.js</td>
<td>Docker</td>
<td>Job scheduled by vacation to collect some new videos from Youtube and saving them (through SERVICES)</td>
</tr>
<tr>
<td><a href="https://github.com/KillrVideo/killrvideo-integration-tests" target="_blank">INTEGRATION TESTS</a></td>
<td>Java</td>
<td>IDE(s)</td>
<td>Cucumber integration tests call GRPC services and testing expected behavior</td>
</tr>
<tr>
<td><a href="http://www.datastax.com/products/datastax-enterprise" target="_blank">DSE</a></td>
<td>---</td>
<td>Docker for local development, DataStax Constellation for dev/live sites</td>
<td>Provides Cassandra, Search, Graph</td>
</tr>
<tr>
<td><a href="https://kafka.apache.org/" target="_blank">KAFKA</a></td>
<td>---</td>
<td>Docker</td>
<td>Some service implementations use Kafka for event, see <a href="/docs/development/pub-sub-messaging/">Pub-Sub Messaging</a> for  </td>
</tr>
<tr>
<td><a href="https://zookeeper.apache.org" target="_blank">ZOOKEEPER</a></td>
<td>---</td>
<td>Docker</td>
<td>Used by Kafka to store configuration data   </td>
</tr>
</tbody>
</table>
<h2 id="web-tier">Web Tier</h2>
<p>it&#39;s got a tiered setup that&#39;s pretty common for web applications:</p>
<ul>
<li><strong>Web Client:</strong> The web UI that runs in a browser and is interacted with by the user. It
sends requests to a Web Server (via HTTP, web sockets, etc.)</li>
<li><strong>Web Server:</strong> Serves up static assets for the client (i.e. JavaScript, CSS, images) and
responds to requests from the Web Client by routing them to the appropriate service(s) on
the backend.</li>
</ul>
<h2 id="microservices-tier">Microservices Tier</h2>
<p>KillrVideo uses a <a href="http://martinfowler.com/articles/microservices.html" target="_blank">microservices</a> style architecture where
 the site is broken up into multiple smaller services where each service is responsible for providing the 
 functionality for a specific feature. This is the current list of services and the functionality they are 
 responsible for:</p>
<table>
<thead>
<tr>
<th>Service Name</th>
<th>Description</th>
<th>Used Workloads</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Comments</strong></td>
<td>Allows users to comment on videos and keeps track of those comments.</td>
<td>Cassandra</td>
</tr>
<tr>
<td><strong>Ratings</strong></td>
<td>Allows users to rate videos (on a scale of 1-5) and keeps track of those ratings.</td>
<td>Cassandra</td>
</tr>
<tr>
<td><strong>Search</strong></td>
<td>Indexes the available videos for searching by keyword and provides search suggestions (i.e. typeahead) support.</td>
<td>Cassandra,Search</td>
</tr>
<tr>
<td><strong>Statistics</strong></td>
<td>Keeps track of statistics for videos like how many times they&#39;ve been played back.</td>
<td>Cassandra</td>
</tr>
<tr>
<td><strong>Suggested Videos</strong></td>
<td>Provides suggestions for videos similar to another video as well as personalized video suggestions for a particular user.</td>
<td>Cassandra, Search, Graph</td>
</tr>
<tr>
<td><strong>Uploads</strong></td>
<td>Allows users to upload videos to the site and handles converting uploaded video files to a format that&#39;s compatible with the site.</td>
<td>Cassandra</td>
</tr>
<tr>
<td><strong>User Management</strong></td>
<td>Manages user accounts including signing up and logging in/out.</td>
<td>Cassandra</td>
</tr>
<tr>
<td><strong>Video Catalog</strong></td>
<td>Keeps track of all the videos available for playback and the details of those videos (i.e. title, description, etc.)</td>
<td>Cassandra</td>
</tr>
</tbody>
</table>
<p>Each of these services is designed to be completely independent and not have a dependency  on any other service
 being available to do its job. What does this mean in practice? That the implementations of our services shouldn&#39;t 
 be making calls to other service APIs in order to do their work when at all possible.
F
So if we don&#39;t want our services directly calling other service APIs, how will the services
interact with each other?</p>
<h2 id="events-for-service-collaboration">Events for Service Collaboration</h2>
<p>In KillrVideo we&#39;ve chosen to use <a href="http://martinfowler.com/eaaDev/EventCollaboration.html" target="_blank">events for collaboration</a> between services rather than 
having services calling each other directly. Each service is for publishing events about interesting things that 
happen inside of them. Other services can then subscribe to any events they are interested in and react accordingly.</p>
<blockquote>
<h4 id="an-example-from-killrvideo">An Example from KillrVideo</h4>
<p>Whenever a new YouTube video is added to the video catalog, the <strong>Video Catalog</strong> 
service publishes a <code>YouTubeVideoAdded</code> event. That event contains some of the details
of the video that was added (like it&#39;s id, name, description, etc.). Other services can
(and do) subscribe to this event if they are interested. For example, the <strong>Search</strong>
service might want to add the video to its index so the video starts showing up in
search results. Or the <strong>Suggested Videos</strong> service may want to figure out what other
videos are similar to that one so it can offer suggestions.</p>
</blockquote>
<p>If services are publishing events and possibly subscribing to them as well, this implies
that we&#39;ll need some sort of mechanism for doing <a href="/docs/development/pub-sub-messaging/">Publish-subscribe</a> 
messaging. We&#39;ll cover the specifics of actually implementing pub-sub shortly.</p>
<p><a href="/docs/guides/web-tier/">Next: Web Tier Implementation</a></p>

      </article>
      <div class="column is-4-tablet is-3-widescreen">
        <nav class="docs panel">
          <div class="panel-heading">
            <span class="icon">
              <i class="fa fa-info"></i>
            </span>
            General Guides
          </div>

          

          
          
          
            
          

          <div class="panel-block is-active">
            <a href="/docs/guides/architecture/">High Level Architecture Overview</a>

            
            
            <ul class="headings-list links-list">
            
              <li>
                <a href="/docs/guides/architecture/#web-tier">Web Tier</a>
              </li>
            
              <li>
                <a href="/docs/guides/architecture/#microservices-tier">Microservices Tier</a>
              </li>
            
              <li>
                <a href="/docs/guides/architecture/#events-for-service-collaboration">Events for Service Collaboration</a>
              </li>
            
            </ul>
            
          </div>

          

          
          
          

          <div class="panel-block">
            <a href="/docs/guides/web-tier/">Web Tier Implementation</a>

            
            
          </div>

          

          
          
          

          <div class="panel-block">
            <a href="/docs/guides/microservices-tier/">Microservices Tier Implementation</a>

            
            
          </div>

          

          
          
          

          <div class="panel-block">
            <a href="/docs/guides/feature-matrix/">Feature Matrix</a>

            
            
          </div>

          

          
          
          

          <div class="panel-block">
            <a href="/docs/guides/docker/">Docker and Infrastructure Dependencies</a>

            
            
          </div>

          

          
          
          

          <div class="panel-block">
            <a href="/docs/guides/service-discovery/">Service Discovery</a>

            
            
          </div>

          

          
          
          

          <div class="panel-block">
            <a href="/docs/guides/datastax-studio/">Using DataStax Studio</a>

            
            
          </div>

          

          
          
          

          <div class="panel-block">
            <a href="/docs/guides/repositories/">Repositories Overview</a>

            
            
          </div>

          
        
        </nav>
      </div>
    </div>
  </div>
</section>


  
  <footer class="footer">
    <div class="container level">
      <div class="level-left">
        <div class="level-item">
          <p>
            <strong>KillrVideo</strong> is open source and available under an 
            <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank">Apache 2.0</a> license.
          <p>
          <p>
            <small>Site version <a href="https://github.com/KillrVideo/killrvideo.github.io/commit/19ff6888088d32e22e6045ba6433955802f561cc" target="_blank">19ff688</a></small>
          </p>
        </div>
      </div>
      <div class="level-right">
        <div class="level-right">
          <a class="button level-item" href="https://github.com/KillrVideo/killrvideo.github.io/tree/source/src/site/docs/guides/architecture.md" target="_blank">
            <i class="fa fa-github fa-fw"></i>Improve this page
          </a>
        </div>
      </div>
    </div>
  </footer>
  
  <script type="text/javascript" src="/assets/js/bundle.js"></script>

  
  
<script type="text/javascript">
  // Make doc navigation sticky once window is scrolled past 100px
  KillrVideo.sticky('nav.docs', 100, 20);
</script>

</body>
</html>