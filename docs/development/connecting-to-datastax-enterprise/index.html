<!doctype html>
<html>
<head>
  <title>KillrVideo - Connecting to DataStax Enterprise</title>
  <link href="/assets/css/bundle.css" rel="stylesheet">
  <link rel="icon" type="image/png" href="/assets/images/killrvideo-icon.png"/>
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
  
  <header>
    <nav class="nav">
      <div class="container">
        <div class="nav-left">
          <a href="/" class="nav-item">
            <img src="/assets/images/killrvideo.png" alt="KillrVideo logo" />
          </a>
        </div>

        <!-- Nav Toggle on mobile -->
        <span class="nav-toggle">
          <span></span>
          <span></span>
          <span></span>
        </span>

        <div class="nav-right nav-menu">
          <span class="nav-item">
            <a href="/getting-started/" class="button is-primary">
              <i class="fa fa-code fa-fw"></i> Get Started
            </a>
          </span>
          <a href="/docs/" class="nav-item">
            Docs
          </a>
          <a href="/support/" class="nav-item">
            Support
          </a>
          <a href="https://github.com/KillrVideo" target="_blank" class="nav-item">
            <i class="fa fa-github fa-2x"></i>
          </a>
        </div>
      </div>
    </nav>
  </header>

  
  
<section class="section">
  <div class="container">
    <div class="columns">
      <article class="column is-8-tablet is-9-widescreen content">
        <h1 id="connecting-to-datastax-enterprise">Connecting to DataStax Enterprise</h1>
<p>These microservices are part of a reference application for Cassandra and DSE, so you&#39;ll 
obviously be connecting to a DSE cluster. You should already have your Docker environment setup
and running after completeing the <a href="/docs/development/setup-docker-environment/">Setup Docker Environment</a> step. Part of that
environment includes a running DSE node. So how do you get the IP address and port that you
need to connect?</p>
<h2 id="locating-dse">Locating DSE</h2>
<p>The default Docker configuration for KillrVideo uses a <code>docker-compose</code> file to start the application,
including one DSE node. Within the Docker network, this node can be referenced by the service name in the 
<code>docker-compose.yaml</code> file which is <code>dse</code>. </p>
<p>We provide alternate configurations that allow the contact points to be overriden by setting the 
<code>KILLRVIDEO_DSE_CONTACT_POINTS</code> environment variable. This makes it simple to connect KillrVideo to an external
 cluster. See the <a href="/docs/development/setup-docker-environment/">Docker Setup</a> page for more information. </p>
<p>We recommend defaulting the contact points to <code>dse</code> but checking the environment variable and using that 
value if set.</p>
<h2 id="making-sure-dse-is-ready">Making sure DSE is Ready</h2>
<p>Once we have the contact point(s) for our cluster, we can then go about
configuring the driver to connect to our DSE cluster (i.e. a single node running in Docker).
One thing to keep in mind when writing the code that sets up and initially connects to the
cluster is that DSE takes time to start up when it&#39;s launched. This is especially true for a
brand new node that is starting for the first time.</p>
<p>So, when writing the code that initially connects to DSE, be sure to add some retry logic
that retries the intial connection. In other microservice implementations, we&#39;ve found that
<strong>90-120 seconds</strong> is usually enough time for it to start, so we built in retries for at least
that amount of time before exiting with an error.</p>
<h2 id="the-cql-search-and-graph-schema-configuration">The CQL, Search and Graph Schema Configuration</h2>
<p>The <a href="https://github.com/KillrVideo/killrvideo-dse-config" target="_blank">Killrvideo DSE configuration</a> defined in the common <code>docker-compose.yaml</code> file that
we looked at above contains code that will bootstrap the schema used by the KillrVideo application including 
CQL tables as well as search indexes and graph schema where available.</p>

      </article>
      <div class="column is-4-tablet is-3-widescreen">
        <nav class="docs panel">
          <div class="panel-heading">
            <span class="icon">
              <i class="fa fa-wrench"></i>
            </span>
            Advanced
          </div>

          

          
          
          

          <div class="panel-block">
            <a href="/docs/development/implementers-cheatsheet/">Microservice Implementer&#39;s Cheatsheet</a>

            
            
          </div>

          

          
          
          

          <div class="panel-block">
            <a href="/docs/development/setup-git-repo/">Setting up the Git Repo</a>

            
            
          </div>

          

          
          
          

          <div class="panel-block">
            <a href="/docs/development/setup-docker-environment/">Setting up the Docker Environment</a>

            
            
          </div>

          

          
          
          

          <div class="panel-block">
            <a href="/docs/development/generate-service-code/">Generating Service Code</a>

            
            
          </div>

          

          
          
          
            
          

          <div class="panel-block is-active">
            <a href="/docs/development/connecting-to-datastax-enterprise/">Connecting to DataStax Enterprise</a>

            
            
            <ul class="headings-list links-list">
            
              <li>
                <a href="/docs/development/connecting-to-datastax-enterprise/#locating-dse">Locating DSE</a>
              </li>
            
              <li>
                <a href="/docs/development/connecting-to-datastax-enterprise/#making-sure-dse-is-ready">Making sure DSE is Ready</a>
              </li>
            
              <li>
                <a href="/docs/development/connecting-to-datastax-enterprise/#the-cql-search-and-graph-schema-configuration">The CQL, Search and Graph Schema Configuration</a>
              </li>
            
            </ul>
            
          </div>

          

          
          
          

          <div class="panel-block">
            <a href="/docs/development/implement-services/">Implementing the Services</a>

            
            
          </div>

          

          
          
          

          <div class="panel-block">
            <a href="/docs/development/pub-sub-messaging/">Adding Pub-Sub Messaging</a>

            
            
          </div>

          

          
          
          

          <div class="panel-block">
            <a href="/docs/development/functional-specs/">Microservice Functional Specifications</a>

            
            
          </div>

          

          
          
          

          <div class="panel-block">
            <a href="/docs/development/using-the-web-tier/">Using the Web Tier</a>

            
            
          </div>

          

          
          
          

          <div class="panel-block">
            <a href="/docs/development/generating-sample-data/">Generating Sample Data</a>

            
            
          </div>

          
        
        </nav>
      </div>
    </div>
  </div>
</section>


  
  <footer class="footer">
    <div class="container level">
      <div class="level-left">
        <div class="level-item">
          <p>
            <strong>KillrVideo</strong> is open source and available under an 
            <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank">Apache 2.0</a> license.
          <p>
          <p>
            <small>Site version <a href="https://github.com/KillrVideo/killrvideo.github.io/commit/19ff6888088d32e22e6045ba6433955802f561cc" target="_blank">19ff688</a></small>
          </p>
        </div>
      </div>
      <div class="level-right">
        <div class="level-right">
          <a class="button level-item" href="https://github.com/KillrVideo/killrvideo.github.io/tree/source/src/site/docs/development/connecting-to-datastax-enterprise.md" target="_blank">
            <i class="fa fa-github fa-fw"></i>Improve this page
          </a>
        </div>
      </div>
    </div>
  </footer>
  
  <script type="text/javascript" src="/assets/js/bundle.js"></script>

  
  
<script type="text/javascript">
  // Make doc navigation sticky once window is scrolled past 100px
  KillrVideo.sticky('nav.docs', 100, 20);
</script>

</body>
</html>